import{S as je,i as Ke,s as Me,G as Ve,k as p,q as w,a as g,l as c,m as y,r as S,h as o,c as A,n as E,N as Ze,b as I,E as t,O as k,P as Ue,Q as G,u as De,H as Fe,I as Ge,J as He,g as de,d as _e,R as Re,T as Je,w as we,U as Se,y as Te,z as Ce,A as Ie,V as ze,W as Oe,B as Be,o as Qe}from"../chunks/index.ba8c4f3a.js";import"../chunks/paths.52e6513e.js";import{l as We,P as Ye}from"../chunks/public.56157045.js";function Xe(a){let e,l,_,d,v,u,L,b,n,P,T,i,f,C,O,N,F,X,M,U,H,x,ae,R,ee,V,q,s,h,Z,K,D,te,B,J,se,z,ne,Q,ie,W,re,Y,oe,$,ue,pe;const fe=a[3].default,j=Ve(fe,a,a[2],null);return{c(){e=p("fieldset"),l=p("legend"),_=w(a[1]),d=g(),j&&j.c(),v=g(),u=p("label"),L=w("Line 1"),b=g(),n=p("input"),P=g(),T=p("label"),i=w("Line 2"),f=g(),C=p("input"),O=g(),N=p("label"),F=w("City"),X=g(),M=p("input"),U=g(),H=p("label"),x=w("State"),ae=g(),R=p("input"),ee=g(),V=p("label"),q=w("Postal code"),s=g(),h=p("input"),Z=g(),K=p("label"),D=w("Country"),te=g(),B=p("select"),J=p("option"),se=w("Australia"),z=p("option"),ne=w("Canada"),Q=p("option"),ie=w("New Zealand"),W=p("option"),re=w("United Kingdom"),Y=p("option"),oe=w("United States"),this.h()},l(m){e=c(m,"FIELDSET",{class:!0});var r=y(e);l=c(r,"LEGEND",{});var ce=y(l);_=S(ce,a[1]),ce.forEach(o),d=A(r),j&&j.l(r),v=A(r),u=c(r,"LABEL",{for:!0});var me=y(u);L=S(me,"Line 1"),me.forEach(o),b=A(r),n=c(r,"INPUT",{id:!0}),P=A(r),T=c(r,"LABEL",{for:!0});var he=y(T);i=S(he,"Line 2"),he.forEach(o),f=A(r),C=c(r,"INPUT",{id:!0}),O=A(r),N=c(r,"LABEL",{for:!0});var ve=y(N);F=S(ve,"City"),ve.forEach(o),X=A(r),M=c(r,"INPUT",{id:!0}),U=A(r),H=c(r,"LABEL",{for:!0});var be=y(H);x=S(be,"State"),be.forEach(o),ae=A(r),R=c(r,"INPUT",{id:!0}),ee=A(r),V=c(r,"LABEL",{for:!0});var ye=y(V);q=S(ye,"Postal code"),ye.forEach(o),s=A(r),h=c(r,"INPUT",{id:!0}),Z=A(r),K=c(r,"LABEL",{for:!0});var Ee=y(K);D=S(Ee,"Country"),Ee.forEach(o),te=A(r),B=c(r,"SELECT",{id:!0});var le=y(B);J=c(le,"OPTION",{});var Pe=y(J);se=S(Pe,"Australia"),Pe.forEach(o),z=c(le,"OPTION",{});var ge=y(z);ne=S(ge,"Canada"),ge.forEach(o),Q=c(le,"OPTION",{});var Ae=y(Q);ie=S(Ae,"New Zealand"),Ae.forEach(o),W=c(le,"OPTION",{});var Le=y(W);re=S(Le,"United Kingdom"),Le.forEach(o),Y=c(le,"OPTION",{});var Ne=y(Y);oe=S(Ne,"United States"),Ne.forEach(o),le.forEach(o),r.forEach(o),this.h()},h(){E(u,"for","line1"),E(n,"id","line1"),n.required=!0,E(T,"for","line2"),E(C,"id","line2"),E(N,"for","city"),E(M,"id","city"),E(H,"for","state"),E(R,"id","state"),E(V,"for","postal_code"),E(h,"id","postal_code"),E(K,"for","country"),J.__value="AU",J.value=J.__value,z.__value="CA",z.value=z.__value,Q.__value="NZ",Q.value=Q.__value,W.__value="UK",W.value=W.__value,Y.__value="US",Y.value=Y.__value,E(B,"id","country"),a[0].country===void 0&&Ze(()=>a[9].call(B)),E(e,"class","svelte-13dsafx")},m(m,r){I(m,e,r),t(e,l),t(l,_),t(e,d),j&&j.m(e,null),t(e,v),t(e,u),t(u,L),t(e,b),t(e,n),k(n,a[0].line1),t(e,P),t(e,T),t(T,i),t(e,f),t(e,C),k(C,a[0].line2),t(e,O),t(e,N),t(N,F),t(e,X),t(e,M),k(M,a[0].city),t(e,U),t(e,H),t(H,x),t(e,ae),t(e,R),k(R,a[0].state),t(e,ee),t(e,V),t(V,q),t(e,s),t(e,h),k(h,a[0].postal_code),t(e,Z),t(e,K),t(K,D),t(e,te),t(e,B),t(B,J),t(J,se),t(B,z),t(z,ne),t(B,Q),t(Q,ie),t(B,W),t(W,re),t(B,Y),t(Y,oe),Ue(B,a[0].country,!0),$=!0,ue||(pe=[G(n,"input",a[4]),G(C,"input",a[5]),G(M,"input",a[6]),G(R,"input",a[7]),G(h,"input",a[8]),G(B,"change",a[9])],ue=!0)},p(m,[r]){(!$||r&2)&&De(_,m[1]),j&&j.p&&(!$||r&4)&&Fe(j,fe,m,m[2],$?He(fe,m[2],r,null):Ge(m[2]),null),r&1&&n.value!==m[0].line1&&k(n,m[0].line1),r&1&&C.value!==m[0].line2&&k(C,m[0].line2),r&1&&M.value!==m[0].city&&k(M,m[0].city),r&1&&R.value!==m[0].state&&k(R,m[0].state),r&1&&h.value!==m[0].postal_code&&k(h,m[0].postal_code),r&1&&Ue(B,m[0].country)},i(m){$||(de(j,m),$=!0)},o(m){_e(j,m),$=!1},d(m){m&&o(e),j&&j.d(m),ue=!1,Re(pe)}}}function $e(a,e,l){let{$$slots:_={},$$scope:d}=e,{legend:v}=e,{address:u}=e;function L(){u.line1=this.value,l(0,u)}function b(){u.line2=this.value,l(0,u)}function n(){u.city=this.value,l(0,u)}function P(){u.state=this.value,l(0,u)}function T(){u.postal_code=this.value,l(0,u)}function i(){u.country=Je(this),l(0,u)}return a.$$set=f=>{"legend"in f&&l(1,v=f.legend),"address"in f&&l(0,u=f.address),"$$scope"in f&&l(2,d=f.$$scope)},[u,v,d,_,L,b,n,P,T,i]}class ke extends je{constructor(e){super(),Ke(this,e,$e,Xe,Me,{legend:1,address:0})}}function qe(a){let e,l;return{c(){e=p("p"),l=w("Payment failed. Please try again."),this.h()},l(_){e=c(_,"P",{class:!0});var d=y(e);l=S(d,"Payment failed. Please try again."),d.forEach(o),this.h()},h(){E(e,"class","error svelte-15xrav7")},m(_,d){I(_,e,d),t(e,l)},d(_){_&&o(e)}}}function xe(a){let e,l,_,d,v,u,L,b,n,P,T;return{c(){e=p("label"),l=w("Name"),_=g(),d=p("input"),v=g(),u=p("label"),L=w("Email"),b=g(),n=p("input"),this.h()},l(i){e=c(i,"LABEL",{for:!0});var f=y(e);l=S(f,"Name"),f.forEach(o),_=A(i),d=c(i,"INPUT",{id:!0}),v=A(i),u=c(i,"LABEL",{for:!0});var C=y(u);L=S(C,"Email"),C.forEach(o),b=A(i),n=c(i,"INPUT",{type:!0,id:!0}),this.h()},h(){E(e,"for","name"),E(d,"id","name"),d.required=!0,E(u,"for","email"),E(n,"type","email"),E(n,"id","email"),n.required=!0},m(i,f){I(i,e,f),t(e,l),I(i,_,f),I(i,d,f),k(d,a[3]),I(i,v,f),I(i,u,f),t(u,L),I(i,b,f),I(i,n,f),k(n,a[2]),P||(T=[G(d,"input",a[7]),G(n,"input",a[8])],P=!0)},p(i,f){f&8&&d.value!==i[3]&&k(d,i[3]),f&4&&n.value!==i[2]&&k(n,i[2])},d(i){i&&o(e),i&&o(_),i&&o(d),i&&o(v),i&&o(u),i&&o(b),i&&o(n),P=!1,Re(T)}}}function et(a){let e;return{c(){e=w("Pay with Afterpay/Clearpay")},l(l){e=S(l,"Pay with Afterpay/Clearpay")},m(l,_){I(l,e,_)},d(l){l&&o(e)}}}function tt(a){let e;return{c(){e=w("Processing...")},l(l){e=S(l,"Processing...")},m(l,_){I(l,e,_)},d(l){l&&o(e)}}}function lt(a){let e,l,_,d,v,u,L,b,n,P,T,i,f,C,O,N,F,X,M,U=a[0]&&qe();function H(s){a[9](s)}let x={legend:"Billing",$$slots:{default:[xe]},$$scope:{ctx:a}};a[4]!==void 0&&(x.address=a[4]),P=new ke({props:x}),we.push(()=>Se(P,"address",H));function ae(s){a[10](s)}let R={legend:"Shipping"};a[5]!==void 0&&(R.address=a[5]),f=new ke({props:R}),we.push(()=>Se(f,"address",ae));function ee(s,h){return s[1]?tt:et}let V=ee(a),q=V(a);return{c(){e=p("h1"),l=w("Afterpay/Clearpay Example"),_=g(),d=p("nav"),v=p("a"),u=w("View code"),L=g(),U&&U.c(),b=g(),n=p("form"),Te(P.$$.fragment),i=g(),Te(f.$$.fragment),O=g(),N=p("button"),q.c(),this.h()},l(s){e=c(s,"H1",{});var h=y(e);l=S(h,"Afterpay/Clearpay Example"),h.forEach(o),_=A(s),d=c(s,"NAV",{});var Z=y(d);v=c(Z,"A",{href:!0});var K=y(v);u=S(K,"View code"),K.forEach(o),Z.forEach(o),L=A(s),U&&U.l(s),b=A(s),n=c(s,"FORM",{class:!0});var D=y(n);Ce(P.$$.fragment,D),i=A(D),Ce(f.$$.fragment,D),O=A(D),N=c(D,"BUTTON",{class:!0});var te=y(N);q.l(te),te.forEach(o),D.forEach(o),this.h()},h(){E(v,"href","https://github.com/joshnuss/svelte-stripe/tree/main/src/routes/examples/afterpay-clearpay"),N.disabled=a[1],E(N,"class","svelte-15xrav7"),E(n,"class","svelte-15xrav7")},m(s,h){I(s,e,h),t(e,l),I(s,_,h),I(s,d,h),t(d,v),t(v,u),I(s,L,h),U&&U.m(s,h),I(s,b,h),I(s,n,h),Ie(P,n,null),t(n,i),Ie(f,n,null),t(n,O),t(n,N),q.m(N,null),F=!0,X||(M=G(n,"submit",ze(a[6])),X=!0)},p(s,[h]){s[0]?U||(U=qe(),U.c(),U.m(b.parentNode,b)):U&&(U.d(1),U=null);const Z={};h&4108&&(Z.$$scope={dirty:h,ctx:s}),!T&&h&16&&(T=!0,Z.address=s[4],Oe(()=>T=!1)),P.$set(Z);const K={};!C&&h&32&&(C=!0,K.address=s[5],Oe(()=>C=!1)),f.$set(K),V!==(V=ee(s))&&(q.d(1),q=V(s),q&&(q.c(),q.m(N,null))),(!F||h&2)&&(N.disabled=s[1])},i(s){F||(de(P.$$.fragment,s),de(f.$$.fragment,s),F=!0)},o(s){_e(P.$$.fragment,s),_e(f.$$.fragment,s),F=!1},d(s){s&&o(e),s&&o(_),s&&o(d),s&&o(L),U&&U.d(s),s&&o(b),s&&o(n),Be(P),Be(f),q.d(),X=!1,M()}}}async function at(){const a=await fetch("/examples/afterpay-clearpay/payment-intent",{method:"POST",headers:{"content-type":"application/json"}}),{clientSecret:e}=await a.json();return e}function st(a,e,l){let _=null,d=null,v=!1,u="jsmith@example.com",L="John Smith",b={line1:"123 Main",line2:"Apt 100",state:"CA",city:"Los Angeles",country:"US",postal_code:"1000"},n={line1:"123 Main",line2:"Apt 100",state:"CA",city:"Los Angeles",country:"US",postal_code:"1000"};Qe(async()=>{_=await We(Ye);const O=new URLSearchParams(window.location.search);l(0,d=O.get("error"))});async function P(){if(v)return;l(1,v=!0);const O=await at(),N=await _.confirmAfterpayClearpayPayment(O,{payment_method:{billing_details:{name:L,email:u,address:b}},shipping:{name:L,address:n},return_url:`${window.location.origin}/examples/afterpay-clearpay/return`});console.log({result:N}),N.error&&(l(0,d=N.error),l(1,v=!1))}function T(){L=this.value,l(3,L)}function i(){u=this.value,l(2,u)}function f(O){b=O,l(4,b)}function C(O){n=O,l(5,n)}return[d,v,u,L,b,n,P,T,i,f,C]}class ot extends je{constructor(e){super(),Ke(this,e,st,lt,Me,{})}}export{ot as component};
