import{S as F,i as M,s as R,k as v,l as V,m as x,h as _,b as P,F as E,X as H,Y as J,o as Y,w as z,q as B,a as I,e as Q,r as C,c as A,n as U,E as w,d as N,f as X,g as D,u as G,v as Z,U as $,y as O,z as T,A as j,W as ee,B as q,Q as te,V as ne}from"../chunks/index.ba8c4f3a.js";import{g as se}from"../chunks/navigation.640da136.js";import{l as le,P as re}from"../chunks/public.56157045.js";import{m as K}from"../chunks/util.bb100f75.js";import{E as ie}from"../chunks/Elements.5d1cb5c6.js";function oe(l){let e;return{c(){e=v("div")},l(t){e=V(t,"DIV",{}),x(e).forEach(_)},m(t,n){P(t,e,n),l[6](e)},p:E,i:E,o:E,d(t){t&&_(e),l[6](null)}}}function ae(l,e,t){let n,i;const a=H(),{elements:s}=J("stripe");let{options:u=void 0}=e;Y(()=>(n=K(i,"payment",s,a,u),()=>n.destroy()));function c(){n.blur()}function d(){n.clear()}function f(){n.destroy()}function g(){n.focus()}function h(o){z[o?"unshift":"push"](()=>{i=o,t(0,i)})}return l.$$set=o=>{"options"in o&&t(1,u=o.options)},[i,u,c,d,f,g,h]}class ce extends F{constructor(e){super(),M(this,e,ae,oe,R,{options:1,blur:2,clear:3,destroy:4,focus:5})}get blur(){return this.$$.ctx[2]}get clear(){return this.$$.ctx[3]}get destroy(){return this.$$.ctx[4]}get focus(){return this.$$.ctx[5]}}function ue(l){let e;return{c(){e=v("div")},l(t){e=V(t,"DIV",{}),x(e).forEach(_)},m(t,n){P(t,e,n),l[6](e)},p:E,i:E,o:E,d(t){t&&_(e),l[6](null)}}}function fe(l,e,t){let{defaultValues:n=null}=e,i,a;const s=H(),{elements:u}=J("stripe");Y(()=>(i=K(a,"linkAuthentication",u,s,n?{defaultValues:n}:{}),()=>i.destroy()));function c(){i.blur()}function d(){i.clear()}function f(){i.destroy()}function g(){i.focus()}function h(o){z[o?"unshift":"push"](()=>{a=o,t(0,a)})}return l.$$set=o=>{"defaultValues"in o&&t(1,n=o.defaultValues)},[a,n,c,d,f,g,h]}class me extends F{constructor(e){super(),M(this,e,fe,ue,R,{defaultValues:1,blur:2,clear:3,destroy:4,focus:5})}get blur(){return this.$$.ctx[2]}get clear(){return this.$$.ctx[3]}get destroy(){return this.$$.ctx[4]}get focus(){return this.$$.ctx[5]}}function de(l){let e;return{c(){e=v("div")},l(t){e=V(t,"DIV",{}),x(e).forEach(_)},m(t,n){P(t,e,n),l[14](e)},p:E,i:E,o:E,d(t){t&&_(e),l[14](null)}}}function _e(l,e,t){let{mode:n}=e,{allowedCountries:i=void 0}=e,{autocomplete:a={mode:"automatic"}}=e,{blockPoBox:s=void 0}=e,{contacts:u=void 0}=e,{defaultValues:c=void 0}=e,{fields:d=void 0}=e,{validation:f=void 0}=e,{display:g=void 0}=e,h,o;const k=H(),{elements:m}=J("stripe");Y(()=>(h=K(o,"address",m,k,{mode:n,allowedCountries:i,autocomplete:a,blockPoBox:s,contacts:u,defaultValues:c,fields:d,validation:f,display:g}),()=>h.destroy()));function b(){h.blur()}function r(){h.clear()}function y(){h.destroy()}function S(){h.focus()}function L(p){z[p?"unshift":"push"](()=>{o=p,t(0,o)})}return l.$$set=p=>{"mode"in p&&t(1,n=p.mode),"allowedCountries"in p&&t(2,i=p.allowedCountries),"autocomplete"in p&&t(3,a=p.autocomplete),"blockPoBox"in p&&t(4,s=p.blockPoBox),"contacts"in p&&t(5,u=p.contacts),"defaultValues"in p&&t(6,c=p.defaultValues),"fields"in p&&t(7,d=p.fields),"validation"in p&&t(8,f=p.validation),"display"in p&&t(9,g=p.display)},[o,n,i,a,s,u,c,d,f,g,b,r,y,S,L]}class pe extends F{constructor(e){super(),M(this,e,_e,de,R,{mode:1,allowedCountries:2,autocomplete:3,blockPoBox:4,contacts:5,defaultValues:6,fields:7,validation:8,display:9,blur:10,clear:11,destroy:12,focus:13})}get blur(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get destroy(){return this.$$.ctx[12]}get focus(){return this.$$.ctx[13]}}function W(l){let e,t=l[2].message+"",n,i;return{c(){e=v("p"),n=B(t),i=B(" Please try again."),this.h()},l(a){e=V(a,"P",{class:!0});var s=x(e);n=C(s,t),i=C(s," Please try again."),s.forEach(_),this.h()},h(){U(e,"class","error svelte-y4pdr7")},m(a,s){P(a,e,s),w(e,n),w(e,i)},p(a,s){s&4&&t!==(t=a[2].message+"")&&G(n,t)},d(a){a&&_(e)}}}function he(l){let e;return{c(){e=B("Loading...")},l(t){e=C(t,"Loading...")},m(t,n){P(t,e,n)},p:E,i:E,o:E,d(t){t&&_(e)}}}function be(l){let e,t,n;function i(s){l[6](s)}let a={stripe:l[0],clientSecret:l[1],theme:"flat",labels:"floating",variables:{colorPrimary:"#7c4dff"},rules:{".Input":{border:"solid 1px #0002"}},$$slots:{default:[ke]},$$scope:{ctx:l}};return l[3]!==void 0&&(a.elements=l[3]),e=new ie({props:a}),z.push(()=>$(e,"elements",i)),{c(){O(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,u){j(e,s,u),n=!0},p(s,u){const c={};u&1&&(c.stripe=s[0]),u&2&&(c.clientSecret=s[1]),u&144&&(c.$$scope={dirty:u,ctx:s}),!t&&u&8&&(t=!0,c.elements=s[3],ee(()=>t=!1)),e.$set(c)},i(s){n||(D(e.$$.fragment,s),n=!0)},o(s){N(e.$$.fragment,s),n=!1},d(s){q(e,s)}}}function ye(l){let e;return{c(){e=B("Pay")},l(t){e=C(t,"Pay")},m(t,n){P(t,e,n)},d(t){t&&_(e)}}}function ge(l){let e;return{c(){e=B("Processing...")},l(t){e=C(t,"Processing...")},m(t,n){P(t,e,n)},d(t){t&&_(e)}}}function ke(l){let e,t,n,i,a,s,u,c,d,f,g;t=new me({}),i=new ce({}),s=new pe({props:{mode:"billing"}});function h(m,b){return m[4]?ge:ye}let o=h(l),k=o(l);return{c(){e=v("form"),O(t.$$.fragment),n=I(),O(i.$$.fragment),a=I(),O(s.$$.fragment),u=I(),c=v("button"),k.c(),this.h()},l(m){e=V(m,"FORM",{class:!0});var b=x(e);T(t.$$.fragment,b),n=A(b),T(i.$$.fragment,b),a=A(b),T(s.$$.fragment,b),u=A(b),c=V(b,"BUTTON",{class:!0});var r=x(c);k.l(r),r.forEach(_),b.forEach(_),this.h()},h(){c.disabled=l[4],U(c,"class","svelte-y4pdr7"),U(e,"class","svelte-y4pdr7")},m(m,b){P(m,e,b),j(t,e,null),w(e,n),j(i,e,null),w(e,a),j(s,e,null),w(e,u),w(e,c),k.m(c,null),d=!0,f||(g=te(e,"submit",ne(l[5])),f=!0)},p(m,b){o!==(o=h(m))&&(k.d(1),k=o(m),k&&(k.c(),k.m(c,null))),(!d||b&16)&&(c.disabled=m[4])},i(m){d||(D(t.$$.fragment,m),D(i.$$.fragment,m),D(s.$$.fragment,m),d=!0)},o(m){N(t.$$.fragment,m),N(i.$$.fragment,m),N(s.$$.fragment,m),d=!1},d(m){m&&_(e),q(t),q(i),q(s),k.d(),f=!1,g()}}}function Pe(l){let e,t,n,i,a,s,u,c,d,f,g,h,o=l[2]&&W(l);const k=[be,he],m=[];function b(r,y){return r[1]?0:1}return d=b(l),f=m[d]=k[d](l),{c(){e=v("h1"),t=B("Payment Element Example"),n=I(),i=v("nav"),a=v("a"),s=B("View code"),u=I(),o&&o.c(),c=I(),f.c(),g=Q(),this.h()},l(r){e=V(r,"H1",{});var y=x(e);t=C(y,"Payment Element Example"),y.forEach(_),n=A(r),i=V(r,"NAV",{});var S=x(i);a=V(S,"A",{href:!0});var L=x(a);s=C(L,"View code"),L.forEach(_),S.forEach(_),u=A(r),o&&o.l(r),c=A(r),f.l(r),g=Q(),this.h()},h(){U(a,"href","https://github.com/joshnuss/svelte-stripe/tree/main/src/routes/examples/payment-element")},m(r,y){P(r,e,y),w(e,t),P(r,n,y),P(r,i,y),w(i,a),w(a,s),P(r,u,y),o&&o.m(r,y),P(r,c,y),m[d].m(r,y),P(r,g,y),h=!0},p(r,[y]){r[2]?o?o.p(r,y):(o=W(r),o.c(),o.m(c.parentNode,c)):o&&(o.d(1),o=null);let S=d;d=b(r),d===S?m[d].p(r,y):(Z(),N(m[S],1,1,()=>{m[S]=null}),X(),f=m[d],f?f.p(r,y):(f=m[d]=k[d](r),f.c()),D(f,1),f.m(g.parentNode,g))},i(r){h||(D(f),h=!0)},o(r){N(f),h=!1},d(r){r&&_(e),r&&_(n),r&&_(i),r&&_(u),o&&o.d(r),r&&_(c),m[d].d(r),r&&_(g)}}}async function Ee(){const l=await fetch("/examples/payment-element/payment-intent",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({})}),{clientSecret:e}=await l.json();return e}function we(l,e,t){let n=null,i=null,a=null,s,u=!1;Y(async()=>{t(0,n=await le(re)),t(1,i=await Ee())});async function c(){if(u)return;t(4,u=!0);const f=await n.confirmPayment({elements:s,redirect:"if_required"});console.log({result:f}),f.error?(t(2,a=f.error),t(4,u=!1)):se("/examples/payment-element/thanks")}function d(f){s=f,t(3,s)}return[n,i,a,s,u,c,d]}class Ce extends F{constructor(e){super(),M(this,e,we,Pe,R,{})}}export{Ce as component};
