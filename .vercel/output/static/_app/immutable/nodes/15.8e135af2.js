import{S as H,i as Q,s as Y,k as w,q as U,a as N,l as E,m as K,r as I,h as c,c as T,n as m,b as y,E as b,O,Q as j,V as z,F as L,R as D,o as G}from"../chunks/index.ba8c4f3a.js";import"../chunks/paths.52e6513e.js";import{l as J,P as W}from"../chunks/public.56157045.js";function M(l){let t,a;return{c(){t=w("p"),a=U("Payment failed. Please try again."),this.h()},l(r){t=E(r,"P",{class:!0});var o=K(t);a=I(o,"Payment failed. Please try again."),o.forEach(c),this.h()},h(){m(t,"class","error svelte-4i9m9b")},m(r,o){y(r,t,o),b(t,a)},d(r){r&&c(t)}}}function X(l){let t;return{c(){t=U("Pay with Klarna")},l(a){t=I(a,"Pay with Klarna")},m(a,r){y(a,t,r)},d(a){a&&c(t)}}}function Z(l){let t;return{c(){t=U("Processing...")},l(a){t=I(a,"Processing...")},m(a,r){y(a,t,r)},d(a){a&&c(t)}}}function $(l){let t,a,r,o,p,P,_,v,f,i,k,s,R,d,V,g,u=l[0]&&M();function A(e,n){return e[1]?Z:X}let q=A(l),h=q(l);return{c(){t=w("h1"),a=U("Klarna Example"),r=N(),o=w("nav"),p=w("a"),P=U("View code"),_=N(),u&&u.c(),v=N(),f=w("form"),i=w("input"),k=N(),s=w("input"),R=N(),d=w("button"),h.c(),this.h()},l(e){t=E(e,"H1",{});var n=K(t);a=I(n,"Klarna Example"),n.forEach(c),r=T(e),o=E(e,"NAV",{});var B=K(o);p=E(B,"A",{href:!0});var C=K(p);P=I(C,"View code"),C.forEach(c),B.forEach(c),_=T(e),u&&u.l(e),v=T(e),f=E(e,"FORM",{class:!0});var S=K(f);i=E(S,"INPUT",{name:!0,placeholder:!0,type:!0,class:!0}),k=T(S),s=E(S,"INPUT",{name:!0,placeholder:!0,type:!0,class:!0}),R=T(S),d=E(S,"BUTTON",{class:!0});var F=K(d);h.l(F),F.forEach(c),S.forEach(c),this.h()},h(){m(p,"href","https://github.com/joshnuss/svelte-stripe/tree/main/src/routes/examples/klarna"),m(i,"name","name"),m(i,"placeholder","Name"),m(i,"type","text"),i.required=!0,i.disabled=l[1],m(i,"class","svelte-4i9m9b"),m(s,"name","email"),m(s,"placeholder","E-mail"),m(s,"type","email"),s.required=!0,s.disabled=l[1],m(s,"class","svelte-4i9m9b"),d.disabled=l[1],m(d,"class","svelte-4i9m9b"),m(f,"class","svelte-4i9m9b")},m(e,n){y(e,t,n),b(t,a),y(e,r,n),y(e,o,n),b(o,p),b(p,P),y(e,_,n),u&&u.m(e,n),y(e,v,n),y(e,f,n),b(f,i),O(i,l[3]),b(f,k),b(f,s),O(s,l[2]),b(f,R),b(f,d),h.m(d,null),V||(g=[j(i,"input",l[5]),j(s,"input",l[6]),j(f,"submit",z(l[4]))],V=!0)},p(e,[n]){e[0]?u||(u=M(),u.c(),u.m(v.parentNode,v)):u&&(u.d(1),u=null),n&2&&(i.disabled=e[1]),n&8&&i.value!==e[3]&&O(i,e[3]),n&2&&(s.disabled=e[1]),n&4&&s.value!==e[2]&&O(s,e[2]),q!==(q=A(e))&&(h.d(1),h=q(e),h&&(h.c(),h.m(d,null))),n&2&&(d.disabled=e[1])},i:L,o:L,d(e){e&&c(t),e&&c(r),e&&c(o),e&&c(_),u&&u.d(e),e&&c(v),e&&c(f),h.d(),V=!1,D(g)}}}async function x(){const l=await fetch("/examples/klarna/payment-intent",{method:"POST",headers:{"content-type":"application/json"}}),{clientSecret:t}=await l.json();return t}function ee(l,t,a){let r=null,o=null,p=!1,P,_;G(async()=>{r=await J(W);const k=new URLSearchParams(window.location.search);a(0,o=k.get("error"))});async function v(){if(p)return;a(1,p=!0);const k=await x(),s=await r.confirmKlarnaPayment(k,{payment_method:{billing_details:{name:_,email:P,address:{country:"US"}}},return_url:`${window.location.origin}/examples/klarna/return`});console.log({result:s}),s.error&&(a(0,o=s.error),a(1,p=!1))}function f(){_=this.value,a(3,_)}function i(){P=this.value,a(2,P)}return[o,p,P,_,v,f,i]}class se extends H{constructor(t){super(),Q(this,t,ee,$,Y,{})}}export{se as component};
